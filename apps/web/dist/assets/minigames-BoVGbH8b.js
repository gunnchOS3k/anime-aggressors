function v(n){let e=performance.now();function h(r){var i,o;const s=(r-e)/1e3;e=r;const x=(o=(i=navigator.getGamepads)===null||i===void 0?void 0:i.call(navigator))!==null&&o!==void 0?o:[],l=d=>{const c=x[d];return c?{id:c.id,axes:[c.axes[0]||0,c.axes[1]||0,c.axes[2]||0,c.axes[3]||0],buttons:c.buttons.map(g=>g.pressed),connected:!0}:null};n({p1:l(0),p2:l(1)},s),requestAnimationFrame(h)}requestAnimationFrame(h)}function F(){const n=new Set;return document.addEventListener("keydown",e=>{n.add(e.code)}),document.addEventListener("keyup",e=>{n.delete(e.code)}),{id:"keyboard",axes:[(n.has("ArrowLeft")?-1:0)+(n.has("ArrowRight")?1:0),(n.has("ArrowUp")?-1:0)+(n.has("ArrowDown")?1:0),0,0],buttons:[n.has("KeyZ"),n.has("KeyX"),n.has("KeyC"),n.has("Space"),n.has("KeyA"),n.has("KeyS"),n.has("KeyD"),n.has("KeyW")],connected:!0}}function S(n){const e=n.getContext("2d"),h=n.width,r=n.height;let i="waiting",o=0,s=100,x={start:.7,end:.9},l={x:50,y:r-100,vx:0,vy:0,size:20},d=0,c=0;function g(a){if(i!=="waiting")if(i==="charging")o+=60*a,o>=s&&(o=s,i="releasing");else if(i==="releasing"){const t=o/s;t>=x.start&&t<=x.end?(c=t*100,i="flying",l.vx=c*.5,l.vy=-c*.3):(c=t*50,i="flying",l.vx=c*.3,l.vy=-c*.2)}else i==="flying"&&(l.x+=l.vx*a,l.y+=l.vy*a,l.vy+=200*a,l.y>r-50&&(l.y=r-50,i="landed",d=Math.floor(l.x/10)))}function m(){e.fillStyle="#87CEEB",e.fillRect(0,0,h,r),e.fillStyle="#8B4513",e.fillRect(0,r-50,h,50),e.fillStyle="#FFD700",e.beginPath(),e.arc(l.x,l.y,l.size,0,Math.PI*2),e.fill(),e.fillStyle="#000",e.font="20px Arial",e.fillText(`Score: ${d}`,20,30),i==="waiting"?e.fillText("Press any button to start charging!",20,60):i==="charging"?(e.fillStyle="#FF0000",e.fillRect(20,60,o*2,20),e.fillStyle="#000",e.fillText(`Charge: ${Math.floor(o)}%`,20,80),e.fillStyle="#00FF00",e.fillRect(20+x.start*200,60,(x.end-x.start)*200,20)):i==="flying"?e.fillText(`Power: ${Math.floor(c)}%`,20,60):i==="landed"&&(e.fillText(`Final Score: ${d}`,20,60),e.fillText("Press any button to restart",20,90))}function u(){g(1/60),m(),requestAnimationFrame(u)}v((a,t)=>{const f=a.p1||F();f.buttons.some(y=>y)&&(i==="waiting"||i==="landed")&&(i==="landed"?(i="waiting",o=0,l={x:50,y:r-100,vx:0,vy:0,size:20},d=0,c=0):i="charging"),i==="charging"&&!f.buttons.some(y=>y)&&(i="releasing"),g(t)}),u()}function w(n){const e=n.getContext("2d"),h=n.width,r=n.height,i=20,o=Math.floor(h/i),s=Math.floor(r/i);let x=Array(s).fill(null).map(()=>Array(o).fill(0)),l=[{x:1,y:1,color:1,score:0},{x:o-2,y:s-2,color:2,score:0}],d=60,c=Date.now();function g(a){const t=(Date.now()-c)/1e3;d=Math.max(0,60-t),!(d<=0)&&l.forEach(f=>{f.score=0;for(let y=0;y<s;y++)for(let p=0;p<o;p++)x[y][p]===f.color&&f.score++})}function m(){e.fillStyle="#F0F0F0",e.fillRect(0,0,h,r);for(let a=0;a<s;a++)for(let t=0;t<o;t++)x[a][t]===1?e.fillStyle="#FF6B6B":x[a][t]===2?e.fillStyle="#4ECDC4":e.fillStyle="#FFFFFF",e.fillRect(t*i,a*i,i-1,i-1);if(l.forEach((a,t)=>{e.fillStyle=t===0?"#FF6B6B":"#4ECDC4",e.fillRect(a.x*i+2,a.y*i+2,i-4,i-4)}),e.fillStyle="#000",e.font="20px Arial",e.fillText(`Time: ${Math.floor(d)}s`,20,30),e.fillText(`P1: ${l[0].score}`,20,60),e.fillText(`P2: ${l[1].score}`,20,90),d<=0){const a=l[0].score>l[1].score?"Player 1":l[1].score>l[0].score?"Player 2":"Tie";e.fillText(`Winner: ${a}`,h/2-100,r/2)}}function u(){g(),m(),requestAnimationFrame(u)}v((a,t)=>{const f=a.p1||F(),y=a.p2||F();f.axes[0]<-.5&&l[0].x>0&&l[0].x--,f.axes[0]>.5&&l[0].x<o-1&&l[0].x++,f.axes[1]<-.5&&l[0].y>0&&l[0].y--,f.axes[1]>.5&&l[0].y<s-1&&l[0].y++,y.axes[0]<-.5&&l[1].x>0&&l[1].x--,y.axes[0]>.5&&l[1].x<o-1&&l[1].x++,y.axes[1]<-.5&&l[1].y>0&&l[1].y--,y.axes[1]>.5&&l[1].y<s-1&&l[1].y++,f.buttons[0]&&(x[l[0].y][l[0].x]=1),y.buttons[0]&&(x[l[1].y][l[1].x]=2),g()}),u()}function b(n){const e=n.getContext("2d"),h=n.width,r=n.height,i=4,o=h/i;let s=[{lane:0,lives:3,y:r-100},{lane:2,lives:3,y:r-100}],x=[],l=[],d=0,c=0;function g(a){if(c+=a,c-d>2){const t=Math.floor(Math.random()*i);l.push({x:t*o+o/2,y:-50,lane:t,vx:0}),d=c}x=x.filter(t=>(t.x+=t.vx*a,t.y+=t.vy*a,!(t.x<0||t.x>h||t.y<0||t.y>r))),l=l.filter(t=>(t.y+=100*a,!(t.y>r))),x.forEach((t,f)=>{l.forEach((y,p)=>{Math.abs(t.x-y.x)<30&&Math.abs(t.y-y.y)<30&&(x.splice(f,1),l.splice(p,1))})}),s.forEach(t=>{l.forEach((f,y)=>{f.lane===t.lane&&Math.abs(f.y-t.y)<50&&(t.lives--,l.splice(y,1))})})}function m(){e.fillStyle="#000",e.fillRect(0,0,h,r),e.strokeStyle="#333",e.lineWidth=2;for(let t=1;t<i;t++)e.beginPath(),e.moveTo(t*o,0),e.lineTo(t*o,r),e.stroke();s.forEach((t,f)=>{e.fillStyle=f===0?"#FF6B6B":"#4ECDC4",e.fillRect(t.lane*o+20,t.y-20,40,40),e.fillStyle="#FFF",e.font="16px Arial",e.fillText(`Lives: ${t.lives}`,20,30+f*20)}),e.fillStyle="#FFD700",x.forEach(t=>{e.fillRect(t.x-2,t.y-2,4,4)}),e.fillStyle="#FF0000",l.forEach(t=>{e.fillRect(t.x-15,t.y-15,30,30)}),s.filter(t=>t.lives>0).length===0&&(e.fillStyle="#FFF",e.font="30px Arial",e.fillText("GAME OVER",h/2-100,r/2))}function u(){g(1/60),m(),requestAnimationFrame(u)}v((a,t)=>{const f=a.p1||F(),y=a.p2||F();f.axes[0]<-.5&&s[0].lane>0&&s[0].lane--,f.axes[0]>.5&&s[0].lane<i-1&&s[0].lane++,y.axes[0]<-.5&&s[1].lane>0&&s[1].lane--,y.axes[0]>.5&&s[1].lane<i-1&&s[1].lane++,f.buttons[0]&&x.push({x:s[0].lane*o+o/2,y:s[0].y-20,vx:0,vy:-200,owner:0}),y.buttons[0]&&x.push({x:s[1].lane*o+o/2,y:s[1].y-20,vx:0,vy:-200,owner:1}),g(t)}),u()}function E(n){if(!n)return;n.innerHTML=`
    <div class="mini-menu">
      <button data-game="home">üèè Home-Run Sandbag</button>
      <button data-game="paint">üé® Paint the Floor</button>
      <button data-game="lane">üöÄ 4-Lane Blaster</button>
      <span class="hint">Plug 2 controllers or share 1. Keyboard works too.</span>
    </div>
    <canvas id="stage" width="960" height="540"></canvas>
  `;const e=n.querySelector("#stage");n.addEventListener("click",h=>{const r=h.target.closest("button");if(!r)return;const i=r.dataset.game;e.style.display="block",i==="home"&&S(e),i==="paint"&&w(e),i==="lane"&&b(e)})}export{E as bootstrapMiniGames};
